import{c as l,r,j as e,o as d,p as v,q as y,d as j,C as k,e as N,g as b,L as V,s as w,B as c,v as L}from"./index-CBnQef75.js";const C=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],A=l("circle-check-big",C);const S=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],_=l("circle-x",S);const I=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],R=l("mail",I),B=v("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),g=r.forwardRef(({className:i,variant:t,...s},a)=>e.jsx("div",{ref:a,role:"alert",className:d(B({variant:t}),i),...s}));g.displayName="Alert";const u=r.forwardRef(({className:i,...t},s)=>e.jsx("h5",{ref:s,className:d("mb-1 font-medium leading-none tracking-tight",i),...t}));u.displayName="AlertTitle";const m=r.forwardRef(({className:i,...t},s)=>e.jsx("div",{ref:s,className:d("text-sm [&_p]:leading-relaxed",i),...t}));m.displayName="AlertDescription";const T=()=>{const{token:i}=y(),t=j(),[s,a]=r.useState({isLoading:!1,isVerified:!1,message:"",attempted:!1}),o=async f=>{if(!f){a({isLoading:!1,isVerified:!1,message:"Invalid verification token",attempted:!0});return}a({...s,isLoading:!0,attempted:!0});try{const n=await L(f);if(!n.success){a({isLoading:!1,isVerified:!1,message:n.message||"Verification failed. Please try again or contact support.",attempted:!0});return}a({isLoading:!1,isVerified:!0,message:"Your email has been successfully verified!",attempted:!0})}catch{a({isLoading:!1,isVerified:!1,message:"An error occurred during verification. Please try again later.",attempted:!0})}},x=()=>{t("/signin")},h=()=>{i&&i.length>0&&o(i)},p=()=>!s.attempted||s.isLoading?"Verification In Progress...":s.isVerified?"Thank you for verifying your email":"Email verification failed";return r.useEffect(()=>{i&&i.length>0&&o(i)},[i]),e.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center p-4 bg-white/80 dark:bg-black",children:e.jsxs(k,{className:"w-full max-w-md shadow-lg",children:[e.jsxs(N,{className:"text-center",children:[e.jsx("div",{className:"mx-auto mb-4 flex h-16 w-16 items-center justify-center rounded-full bg-primary/10",children:e.jsx(R,{className:"h-8 w-8 text-primary"})}),e.jsx("h1",{className:"text-2xl font-bold",children:"Email Verification"}),e.jsx("p",{className:"text-muted-foreground",children:p()})]}),e.jsx(b,{children:s.isLoading?e.jsx("div",{className:"flex justify-center py-6",children:e.jsx(V,{loading:!0,message:"Verifying your email..."})}):s.attempted?e.jsxs(g,{variant:s.isVerified?"default":"destructive",className:"my-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[s.isVerified?e.jsx(A,{className:"h-5 w-5"}):e.jsx(_,{className:"h-5 w-5"}),e.jsx(u,{children:s.isVerified?"Success!":"Verification Failed"})]}),e.jsx(m,{className:"mt-2",children:s.message})]}):null}),e.jsx(w,{className:"flex justify-center gap-4",children:s.isVerified?e.jsx(c,{onClick:x,className:"flex w-fit rounded-full text-white bg-green-700 hover:bg-green-800 focus:outline-none focus:ring-4 focus:ring-green-300 font-medium text-sm px-5 py-2.5 dark:bg-green-600 dark:hover:bg-green-700 dark:focus:ring-green-800",children:"Continue to Sign In"}):s.attempted&&!s.isLoading?e.jsxs(e.Fragment,{children:[e.jsx(c,{onClick:h,variant:"secondary",children:"Try Again"}),e.jsx(c,{onClick:()=>t("/signup"),variant:"default",children:"Back to Sign Up"})]}):null})]})})};export{T as default};
