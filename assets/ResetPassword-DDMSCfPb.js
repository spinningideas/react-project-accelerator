import{x as T,t as R,e as S,r as t,j as e,L,C as m,f as h,g as x,y as w,h as p,I as f,B as I,E,F}from"./index-BKCIwwMb.js";const q=()=>{const{toastSuccess:g,toastError:a}=T(),{token:i}=R(),n=S(),[o,j]=t.useState(""),[d,v]=t.useState(""),[l,c]=t.useState(!1),[P,u]=t.useState(!0),[k,y]=t.useState(!1),[N,b]=t.useState("");t.useEffect(()=>{(async()=>{if(!i){a({title:"Invalid Link",description:"No reset token provided."}),n("/signin");return}u(!0);const s=await E(i);s.success&&s.data?(y(!0),b(s.data.email)):(a({title:"Invalid Link",description:s.message||"This password reset link is invalid or has expired."}),setTimeout(()=>n("/forgot-password"),3e3)),u(!1)})()},[i,n]);const C=async r=>{if(r.preventDefault(),o!==d){a({title:"Passwords Don't Match",description:"Please make sure both passwords match."});return}if(o.length<8){a({title:"Password Too Short",description:"Password must be at least 8 characters long."});return}if(i){c(!0);try{const s=await F(i,o);s.success?(g({title:"Password Reset",description:"Your password has been reset successfully. You can now sign in."}),setTimeout(()=>n("/signin"),2e3)):a({title:"Reset Failed",description:s.message||"Failed to reset password."})}catch(s){a({title:"Reset Failed",description:s.message||"Failed to reset password."})}finally{c(!1)}}};return P?e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsx(L,{loading:!0})}):k?e.jsx("div",{className:"min-h-screen flex items-center justify-center px-4 bg-white/80 dark:bg-black",children:e.jsxs(m,{className:"w-full max-w-md mx-auto",children:[e.jsxs(h,{children:[e.jsx(x,{children:"Reset Password"}),e.jsxs(w,{children:["Enter your new password for ",N]})]}),e.jsx(p,{children:e.jsxs("form",{onSubmit:C,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{htmlFor:"newPassword",className:"text-sm font-medium",children:"New Password"}),e.jsx(f,{id:"newPassword",type:"password",placeholder:"••••••••",value:o,onChange:r=>j(r.target.value),required:!0,minLength:8}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Must be at least 8 characters long"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{htmlFor:"confirmPassword",className:"text-sm font-medium",children:"Confirm Password"}),e.jsx(f,{id:"confirmPassword",type:"password",placeholder:"••••••••",value:d,onChange:r=>v(r.target.value),required:!0,minLength:8})]}),e.jsx(I,{type:"submit",className:"w-full",disabled:l,children:l?"Resetting...":"Reset Password"})]})})]})}):e.jsx("div",{className:"min-h-screen flex items-center justify-center px-4 bg-white/80 dark:bg-black",children:e.jsxs(m,{className:"w-full max-w-md mx-auto",children:[e.jsxs(h,{children:[e.jsx(x,{children:"Invalid Link"}),e.jsx(w,{children:"This password reset link is invalid or has expired."})]}),e.jsx(p,{children:e.jsx("p",{className:"text-center text-gray-600 dark:text-gray-400",children:"Redirecting to password reset request page..."})})]})})};export{q as default};
//# sourceMappingURL=ResetPassword-DDMSCfPb.js.map
