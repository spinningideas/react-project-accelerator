import{o as N,r as p,b as A,x as E,j as n,C as R,f as C,g as P,y as T,h as b,I as y,B as v,v as S}from"./index-BKCIwwMb.js";const k=c=>{const d=async()=>{const e=localStorage.getItem(N)||"";return e&&e.length>0?e:null},u=()=>{const e=new Headers;return e.append("Content-Type","application/json"),e.append("Accept","application/json"),e},r=e=>{const t=new Headers;return t.append("Content-Type","application/json"),t.append("Accept","application/json"),t.append("Authorization","Bearer "+e),t.append("Access-Control-Allow-Origin","true"),t};return{get:async(e,t)=>{const s=c+t,a=await fetch(s,{method:"GET",mode:"cors",headers:r(e)}),o=await a.status;let i=await a.json();return i.status=o,i},getAuthenticated:async e=>{const t=await d();if(!t)return{success:!1,message:"Unable to perform request - missing credentials"};const s=c+e,a=await fetch(s,{method:"GET",headers:r(t)}),o=await a.status;let i=await a.json();return i.status=o,i},post:async(e,t={})=>{const s=await fetch(c+e,{method:"POST",mode:"cors",headers:u(),body:JSON.stringify(t)}),a=await s.status;let o=await s.json();return o.status=a,o},postAuthenticated:async(e,t={})=>{const s=await d();if(!s)return{success:!1,message:"Unable to perform search - missing credentials"};const a=await fetch(c+e,{method:"POST",headers:r(s),body:JSON.stringify(t)}),o=await a.status;let i=await a.json();return i.status=o,i},postPagedAuthenticated:async(e,t={})=>{const s=await d();if(!s)return{success:!1,message:"Unable to perform search - missing credentials"};const a=await fetch(c+e,{method:"POST",headers:r(s),body:JSON.stringify(t)}),o=await a.status;let i=await a.json();return i.status=o,i},postFileAuthenticated:async(e,t)=>{const s=await d(),a=new Headers;a.append("Accept","application/json"),a.append("Authorization","Bearer "+s);const o=c+e;return(await fetch(o,{method:"POST",headers:a,body:t})).json()},deleteData:async(e,t)=>{const s=await fetch(c+t,{method:"DELETE",mode:"cors",headers:r(e)}),a=await s.status;let o=await s.json();return o.status=a,o},deleteAuthenticated:async e=>{const t=await d();if(!t)return{success:!1,message:"Unable to perform search - missing credentials"};const s=await fetch(c+e,{method:"DELETE",headers:r(t)}),a=await s.status;let o=await s.json();return o.status=a,o}}},F="http://localhost:3200/api";async function U(c,d,u){try{const r=k(F),h={id:c,name:d,email:u};return(await r.postAuthenticated("/user/upsert",{user:h})).data}catch(r){return console.error("Error updating user:",r),{success:!1,message:r.message}}}const O=()=>{const[c,d]=p.useState(""),[u,r]=p.useState(""),[h,m]=p.useState(""),[f,g]=p.useState(!1),{user:l}=A(),{toastSuccess:x,toastError:w}=E();p.useEffect(()=>{l&&(r(l.email||""),d(l.name||""))},[l]);const j=async e=>{e.preventDefault(),g(!0);try{const t={userId:l?.userId||"",name:c,email:u,active:!0},s=await U(t.userId,t.name,t.email);s.success?x({title:"Profile updated",description:"Your profile information has been updated successfully."}):w({title:"Update failed",description:s.message||"Failed to update profile. Please try again."})}catch(t){w({title:"Update failed",description:t.message||"Failed to update profile. Please try again."})}finally{g(!1),m("")}};return n.jsxs(R,{className:"w-full max-w-md mx-auto",children:[n.jsxs(C,{children:[n.jsx(P,{className:"text-2xl",children:"Your Profile"}),n.jsx(T,{children:"Update your personal information"})]}),n.jsx(b,{children:n.jsxs("form",{onSubmit:j,className:"space-y-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx("label",{htmlFor:"name",className:"text-sm font-medium",children:"Name"}),n.jsx(y,{id:"name",placeholder:"Enter Name",value:c,onChange:e=>d(e.target.value),required:!0})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx("label",{htmlFor:"email",className:"text-sm font-medium",children:"Email"}),n.jsx(y,{id:"email",type:"email",placeholder:"name@example.com",value:u,onChange:e=>r(e.target.value),disabled:!0,className:"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-200 placeholder-gray-700 dark:placeholder-gray-400"}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"Email cannot be changed"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx("label",{htmlFor:"new-password",className:"text-sm font-medium",children:"New Password (leave blank to keep current)"}),n.jsx(y,{id:"new-password",type:"password",placeholder:"••••••••",value:h,onChange:e=>m(e.target.value),minLength:6})]}),n.jsx(v,{type:"submit",className:"w-full",disabled:f,children:f?"Updating...":"Update Profile"})]})}),n.jsx(S,{className:"flex justify-center",children:n.jsxs("div",{className:"text-sm text-muted-foreground",children:["Connected as ",l?.email]})})]})},H=()=>n.jsx("div",{className:"space-y-6 min-h-screen",children:n.jsx(O,{})});export{H as default};
//# sourceMappingURL=Profile-DdjADAqO.js.map
