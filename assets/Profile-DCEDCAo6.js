import{o as A,r as m,b as E,j as a,C as R,f as C,g as P,x as T,h as b,I as y,B as v,v as S,D as k,E as N}from"./index-CfeFTVPE.js";const F=c=>{const d=async()=>{const e=localStorage.getItem(A)||"";return e&&e.length>0?e:null},p=()=>{const e=new Headers;return e.append("Content-Type","application/json"),e.append("Accept","application/json"),e},r=e=>{const t=new Headers;return t.append("Content-Type","application/json"),t.append("Accept","application/json"),t.append("Authorization","Bearer "+e),t.append("Access-Control-Allow-Origin","true"),t};return{get:async(e,t)=>{const n=c+t,s=await fetch(n,{method:"GET",mode:"cors",headers:r(e)}),o=await s.status;let i=await s.json();return i.status=o,i},getAuthenticated:async e=>{const t=await d();if(!t)return{success:!1,message:"Unable to perform request - missing credentials"};const n=c+e,s=await fetch(n,{method:"GET",headers:r(t)}),o=await s.status;let i=await s.json();return i.status=o,i},post:async(e,t={})=>{const n=await fetch(c+e,{method:"POST",mode:"cors",headers:p(),body:JSON.stringify(t)}),s=await n.status;let o=await n.json();return o.status=s,o},postAuthenticated:async(e,t={})=>{const n=await d();if(!n)return{success:!1,message:"Unable to perform search - missing credentials"};const s=await fetch(c+e,{method:"POST",headers:r(n),body:JSON.stringify(t)}),o=await s.status;let i=await s.json();return i.status=o,i},postPagedAuthenticated:async(e,t={})=>{const n=await d();if(!n)return{success:!1,message:"Unable to perform search - missing credentials"};const s=await fetch(c+e,{method:"POST",headers:r(n),body:JSON.stringify(t)}),o=await s.status;let i=await s.json();return i.status=o,i},postFileAuthenticated:async(e,t)=>{const n=await d(),s=new Headers;s.append("Accept","application/json"),s.append("Authorization","Bearer "+n);const o=c+e;return(await fetch(o,{method:"POST",headers:s,body:t})).json()},deleteData:async(e,t)=>{const n=await fetch(c+t,{method:"DELETE",mode:"cors",headers:r(e)}),s=await n.status;let o=await n.json();return o.status=s,o},deleteAuthenticated:async e=>{const t=await d();if(!t)return{success:!1,message:"Unable to perform search - missing credentials"};const n=await fetch(c+e,{method:"DELETE",headers:r(t)}),s=await n.status;let o=await n.json();return o.status=s,o}}},U="http://localhost:3200/api";async function D(c,d,p){try{const r=F(U),f={id:c,name:d,email:p};return(await r.postAuthenticated("/user/upsert",{user:f})).data}catch(r){return console.error("Error updating user:",r),{success:!1,message:r.message}}}const O=()=>{const[c,d]=m.useState(""),[p,r]=m.useState(""),[f,g]=m.useState(""),[w,x]=m.useState(!1),{user:u}=E();m.useEffect(()=>{u&&(r(u.email||""),d(u.name||""))},[u]);const j=async l=>{l.preventDefault(),x(!0);try{const h={userId:u?.userId||"",name:c,email:p,active:!0},e=await D(h.userId,h.name,h.email);e.success?k({title:"Profile updated",description:"Your profile information has been updated successfully."}):N({title:"Update failed",description:e.message||"Failed to update profile. Please try again."})}catch(h){N({title:"Update failed",description:h.message||"Failed to update profile. Please try again."})}finally{x(!1),g("")}};return a.jsxs(R,{className:"w-full max-w-md mx-auto",children:[a.jsxs(C,{children:[a.jsx(P,{className:"text-2xl",children:"Your Profile"}),a.jsx(T,{children:"Update your personal information"})]}),a.jsx(b,{children:a.jsxs("form",{onSubmit:j,className:"space-y-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{htmlFor:"name",className:"text-sm font-medium",children:"Name"}),a.jsx(y,{id:"name",placeholder:"Enter Name",value:c,onChange:l=>d(l.target.value),required:!0})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{htmlFor:"email",className:"text-sm font-medium",children:"Email"}),a.jsx(y,{id:"email",type:"email",placeholder:"name@example.com",value:p,onChange:l=>r(l.target.value),disabled:!0,className:"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-200 placeholder-gray-700 dark:placeholder-gray-400"}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Email cannot be changed"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{htmlFor:"new-password",className:"text-sm font-medium",children:"New Password (leave blank to keep current)"}),a.jsx(y,{id:"new-password",type:"password",placeholder:"••••••••",value:f,onChange:l=>g(l.target.value),minLength:6})]}),a.jsx(v,{type:"submit",className:"w-full",disabled:w,children:w?"Updating...":"Update Profile"})]})}),a.jsx(S,{className:"flex justify-center",children:a.jsxs("div",{className:"text-sm text-muted-foreground",children:["Connected as ",u?.email]})})]})},I=()=>a.jsx("div",{className:"space-y-6 min-h-screen",children:a.jsx(O,{})});export{I as default};
