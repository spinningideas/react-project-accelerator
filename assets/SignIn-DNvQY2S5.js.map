{"version":3,"file":"SignIn-DNvQY2S5.js","sources":["../../src/pages/auth/SignIn.tsx"],"sourcesContent":["import { useEffect } from \"react\";\r\nimport {\r\n  useNavigate,\r\n  useLocation,\r\n  useParams,\r\n  useSearchParams,\r\n} from \"react-router-dom\";\r\nimport { LoadingIndicator } from \"@/components/shared/LoadingIndicator\";\r\nimport { useAuth } from \"@/contexts/AuthContext\";\r\nimport { AUTH_TOKEN_STORAGE_KEY } from \"@/services/auth\";\r\nimport SignInForm from \"@/components/auth/SignInForm\";\r\nimport { resolvePostAuthRedirect } from \"@/utils/redirect\";\r\n\r\n/*\r\n * SignIn page\r\n */\r\nconst SignIn = () => {\r\n  const { user, loadingAuthentication } = useAuth();\r\n  const navigate = useNavigate();\r\n  const location = useLocation();\r\n  const [searchParams] = useSearchParams();\r\n\r\n  const redirectUrl = searchParams.get(\"redirectUrl\");\r\n\r\n  // Redirect authenticated users away from the sign-in page\r\n  useEffect(() => {\r\n    // Only redirect if we're sure the user is authenticated and loading is complete\r\n    if (user && !loadingAuthentication) {\r\n      // If redirectUrl is provided, use it\r\n      if (redirectUrl) {\r\n        navigate(decodeURIComponent(redirectUrl), { replace: true });\r\n        return;\r\n      }\r\n\r\n      const resolvedTarget = resolvePostAuthRedirect(\r\n        location as unknown as Location,\r\n        null,\r\n        (location.state as any)?.from ?? null\r\n      );\r\n      const target = resolvedTarget || \"/\";\r\n      navigate(target, { replace: true });\r\n    }\r\n  }, [user, loadingAuthentication, redirectUrl]);\r\n\r\n  // Don't render anything while still determining auth state and whether user is potentially signed in\r\n  if (loadingAuthentication && localStorage.getItem(AUTH_TOKEN_STORAGE_KEY)) {\r\n    return (\r\n      <div className=\"min-h-screen flex items-center justify-center\">\r\n        <LoadingIndicator loading={true} />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"min-h-screen flex items-center justify-center px-4 bg-white/80 dark:bg-black\">\r\n      <div className=\"max-w-md w-full\">\r\n        <SignInForm />\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default SignIn;\r\n"],"names":["SignIn","user","loadingAuthentication","useAuth","navigate","useNavigate","location","useLocation","searchParams","useSearchParams","redirectUrl","useEffect","target","resolvePostAuthRedirect","AUTH_TOKEN_STORAGE_KEY","jsx","LoadingIndicator","SignInForm"],"mappings":"uGAgBA,MAAMA,EAAS,IAAM,CACnB,KAAM,CAAE,KAAAC,EAAM,sBAAAC,CAAA,EAA0BC,EAAA,EAClCC,EAAWC,EAAA,EACXC,EAAWC,EAAA,EACX,CAACC,CAAY,EAAIC,EAAA,EAEjBC,EAAcF,EAAa,IAAI,aAAa,EAuBlD,OApBAG,EAAAA,UAAU,IAAM,CAEd,GAAIV,GAAQ,CAACC,EAAuB,CAElC,GAAIQ,EAAa,CACfN,EAAS,mBAAmBM,CAAW,EAAG,CAAE,QAAS,GAAM,EAC3D,MACF,CAOA,MAAME,EALiBC,EACrBP,EACA,KACCA,EAAS,OAAe,MAAQ,IAAA,GAEF,IACjCF,EAASQ,EAAQ,CAAE,QAAS,EAAA,CAAM,CACpC,CACF,EAAG,CAACX,EAAMC,EAAuBQ,CAAW,CAAC,EAGzCR,GAAyB,aAAa,QAAQY,CAAsB,EAEpEC,MAAC,OAAI,UAAU,gDACb,eAACC,EAAA,CAAiB,QAAS,GAAM,CAAA,CACnC,EAKFD,EAAAA,IAAC,MAAA,CAAI,UAAU,+EACb,SAAAA,EAAAA,IAAC,MAAA,CAAI,UAAU,kBACb,SAAAA,EAAAA,IAACE,EAAA,CAAA,CAAW,CAAA,CACd,EACF,CAEJ"}